// test.flx
// Copyright (c) 2014 - The Foreseeable Future, zhiayang@gmail.com
// Licensed under the Apache License Version 2.0.

import Foundation

ffi func printf(x: Int8*, ...) -> Int32

namespace Thing::Troll
{
	func test()
	{
		printf("TESTING\n")
		return
	}


	struct Floby
	{
		var haha: Int32 = 691
		init(d: Int32)
		{
			self.haha = d
		}
		init()
		{
		}
		func food() -> Int32
		{
			return 1058
		}
	}
}

struct Bar
{
	var norf: Int32 = 1600
}

struct Foo
{
	var flob: Bar
	var bar: Int32 = 400
	var qux: Int32

	init(q: Int64)
	{
		self.qux = q as Int32
		self.flob.norf = (q * 400) as Int32
	}

	init()
	{
		self.qux = 800
		self.flob.norf = 800 * 3
	}
}

func mult(x: Int64) -> Int64 { x * 2 }
func main(argc: Int32, argv: Int8**) -> Int32
{
	var x: String("Hello, World")
	x = "Bye, World"

	printf("[%s]\n", x.data)
	printf("%d\n", x == "Bye, World")

	var d: Thing::Troll::Floby(400)

	printf("%d, %d, %d\n", d.haha, d.food(), mult(20 as Int64))

	Thing::Troll::test()
	return 0
}





