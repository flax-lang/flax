import Foundation

struct String
{
	var len: Int64
	var data: Int8 ptr

	init()
	{
		self.len = 64
		self.data = malloc(self.len)
	}

	func length() -> Int64
	{
		return self.len
	}

	operator=(other: Int8 ptr)
	{
		self.data = other
		puts(self.data)
	}
}

func main()
{
	var x: String = "Hello, World!"
	var z: String = x

	printInt64(z.length())
}

ffi func printBool(x: Bool)
ffi func printInt64(x: Int64)
ffi func putchar(x: Int32) -> Int32
ffi func malloc(x: Int64) -> Int8 ptr
ffi func puts(x: Int8 ptr) -> Int32
